@model IEnumerable<MultiTenantBlog.Models.BlogPost>
@{
    ViewData["Title"] = "Blog Yazıları";
}

<!-- Blog Posts Grid -->
<div class="row">
    @if (Model != null && Model.Any())
    {
        @foreach (var post in Model)
        {
            <div class="col-md-6 col-lg-4 mb-4">
                <!-- Blog Post Card -->
                <div class="card blog-card h-100">
                    <!-- Post Image Placeholder -->
                    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
                        <i class="fas fa-image fa-3x text-muted"></i>
                    </div>
                    
                    <div class="card-body d-flex flex-column">
                        <!-- Category Badge -->
                        <div class="mb-2">
                            <span class="badge category-badge" style="background-color: @post.Category.Color;">
                                <i class="fas fa-tag me-1"></i>@post.Category.Name
                            </span>
                        </div>
                        
                        <!-- Post Title -->
                        <h5 class="card-title">
                            <a href="@Url.Action("Details", new { id = post.Id })" class="text-decoration-none text-dark">
                                @post.Title
                            </a>
                        </h5>
                        
                        <!-- Post Summary -->
                        <p class="card-text flex-grow-1">
                            @if (!string.IsNullOrEmpty(post.Summary))
                            {
                                @post.Summary
                            }
                            else
                            {
                                // Eğer özet yoksa, content'in ilk 150 karakterini göster
                                var shortContent = post.Content.Length > 150 
                                    ? post.Content.Substring(0, 150) + "..." 
                                    : post.Content;
                                @Html.Raw(shortContent)
                            }
                        </p>
                        
                        <!-- Post Meta Information -->
                        <div class="post-meta mb-3">
                            <small>
                                <i class="fas fa-user me-1"></i>@post.Author
                                <i class="fas fa-calendar ms-3 me-1"></i>@post.PublishedDate.ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("tr-TR"))
                            </small>
                        </div>
                        
                        <!-- Read More Button -->
                        <div class="mt-auto">
                            <a href="@Url.Action("Details", new { id = post.Id })" class="read-more-btn">
                                Devamını Oku <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <!-- No Posts Message -->
        <div class="col-12">
            <div class="text-center py-5">
                <i class="fas fa-file-alt fa-4x text-muted mb-3"></i>
                <h3 class="text-muted">Henüz blog yazısı bulunmuyor</h3>
                <p class="text-muted">Bu tenant için henüz yayınlanmış bir blog yazısı yok.</p>
                
                @if (ViewBag.CurrentTenant != null)
                {
                    <a href="@Url.Action("Index", "Admin")" class="btn btn-primary">
                        <i class="fas fa-plus me-1"></i>İlk Yazını Ekle
                    </a>
                }
            </div>
        </div>
    }
</div>

<!-- Pagination (Gelecekte eklenebilir) -->
@if (Model != null && Model.Count() >= 10)
{
    <div class="row mt-4">
        <div class="col-12 text-center">
            <nav>
                <p class="text-muted">
                    <small>Sayfalama özelliği gelecek güncellemelerde eklenecek</small>
                </p>
            </nav>
        </div>
    </div>
}

@section Scripts {
    <script>
        // Blog kartları için hover efekti
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.blog-card');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
}